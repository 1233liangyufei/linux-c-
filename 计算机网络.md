# 计算机网络

# 第一章 **计算机网络概述（上）**

## 1.1 计算机网络基本概念

计算机网络 = 计算机技术+通信技术

模型

信源

发送设备

信道 噪音

接收设备

信宿

计算机网络  通信网络

信源信宿 计算机 

发送内容：数字信息

计算机网络 互联自治的计算机集合

自治：计算机没主从关系，不能控制其他计算机

互联：互联互通  利用 通信联络 如光纤 电缆

主机就是计算机，链路就是链接的介质

问题：计算机距离很远的时候，如何互联互通，直接连接不可行，

办法：交换网络，重要设备，交换节点：路由器，交换机，数据通信

最大的网络 因特网Internt

Internet

全球最大互联网

isp互联网提供商

区域网络

组织网络

校园网

计算机

数百万互联的计算设备 pc智能手机  主机 端系统 网络应用

 连接：通信链路，光线，电缆，无线

不可能直连所有，有交换网络，数据的分组转发



服务：应用

Internet是通信基础设施，可以在这个上面应用网络应用

是一个应用编程接口，使得各个主机数据发送接受，类似于邮政系统一样。



问题：硬件互联不能保证正常运行，数据的交互进行

还需要网络协议

协议？约束了什么？

网络协议

计算机网络的硬件是基础

数据传输交换必须遵循相应的规则

如同交通系统，仅仅有路，没用交通规则，交通系统很可能瘫痪

任何系统都需要规则？

说话有语法，网络有协议

人类沟通也有规则，发送特定的信息，对信息进行响应，

计算机网络通信遵循规则，通信方式是数字的但是思想不变，这就是网络协议

网络协议是网络进行数据交换过程遵循的规则于约定。

网络协议 约束了什么？

通信实体之间交换信息的格式，含义，受到信息采取的行为，信息发送的顺序，

不同协议任务不同，作用对象不同，

基本要素

- 语法：协议交换信息的格式，底层信息就是线路的高低点平
- 语义：需要发出何种控制信息，什么含义，做出什么响应
- 时序：协议双方通信遵循的顺序与速度匹配问题

协议作用

- 规范发送接受过程
  - tcp ip
- 网络创新
- Internet标准
  - rfc
  - ietf
- 学习网络的重要内容

## 1.2 计算机网络结构

网络边缘

- 主机
- 网络应用

接入网络，物理介质

- 有线物理介质，
- 无线通信链路

核心网络

- 路由器
- 网络的网络

网络边缘

主机 端系统

- 网络边缘
- 运行网络应用程序
  - web email 



客户/服务器应用模型

- 客户发出请求
- 服务器响应
- web ftp

对等应用模型p2p

- 没有客户服务器之分
- 可以没有专用服务器
- 对等实体直接进行通信
- bt skype qq

**接入网络**

将网络边缘来连接到核心网络

居民接入

机构接入

移动接入

用户关心

- 带宽 bps 数据传输速度 与通信带宽不同 信号频率差 hz
- 独占/共享

dsl数字用户线路

adsl非对称

利用电话线

多路复用技术

控制器分离电话和网络信号

调制解调器

利用已有的电话线

- 数据通信连互联网
- 语言电话连电话局

上下行速率不同，下行块，上行慢

FDM 频分复用技术

下行50-1M

上限4K-50K

0-4K电话

**电缆网络**

cable 

频分多路复用 电视就是频道

HFC 混合光线同轴电缆

非对称

hfc共享型

dsl独占型

路由器 防火墙 NAT

以太网 无线网

**机构介入网络**

局域网

以太网

**无线接入网络**

**基站** **接入点**

无线局域网LAN

wifi 802.11 54Mbps

**广域无线接入**

手机网络

3g 4g lte

**网络核心**

路由器

路由+转发

internt

数据包 信件 地址信息

送到合适的接口

本地转发表 路由表

目的地址 输出链路

xxx          xxxxxxxx

xxxxx        xxxxxxx

利用路由协议与路由算法

路由

确定分组从源到目的传输

转发

将分组从路由器的输入端口交换到正确的输出端口

**网络基本问题**

数据从源主机到目的主机

就是数据交换技术

端系统通过 isp连接到互联网

- 家庭，公司和大学isp
- 接入isp互联
- 任意主机才能互相发送分组

当前internrt结构无人知道

数以百万isp如何相连？

- 直接互联，不适用大规模网络，是O(n^2)问题，太过于复杂
- 将isp连接到国家或者国家或者全球isp
- 商业看有竞争者

对等链路

ixp

区域isp 接入isp  全球isp

内容提供商网络 谷歌 微软

网络

- 一级isp
- 内容提供网络

## 1.3 网络核心

电路交换

**如何将数据通过网络核心从源主机到达目的主机**？

数据交换

任意两台主机需要交换？

最简单的方案，两根电线连一下。

存在的问题

需要的链路是N^2级别的，

经济不可行

技术不可行

解决办法

引入交换设备

每个主机只需要一条链路

交换链路实现数据的动态转发

**问题**

交换设备的端口特别多

如果主机距离特别远，也很难连接到一个交换设备中

为了联通性与并保持网络规模

交换设备互联建立交换网络，主机与交换网络连接



**交换**

- 交换设备，动态转接，交换设备在端口上建立物理的连接，在一个端口将数据转移到另一个网络
- 动态分配传输资源，





**数据交换**

- 电路交换
- 报文交换
- 分组交换

电路交换：电话网络

拨号：请求建立电路

说话：数据传输

挂机：电路关闭

电路交换三个阶段

- 建立连接 呼叫/电路建立
- 通信
- 释放连接/关闭电路

独占资源

两边说话不说话，电路资源都被占用，除非挂机。

第三方资源才能占用电路资源

问题：

电路网络，通信需要建立电路

带你花交换网络如何共享中继线？

多路复用技术

**多路复用技术**

通信技术概念

每个网络独占链路

带宽远远大于一个用户的带宽

这是低效的，使用多路复用技术可以提高效率

多路复用

链路/网络资源划分为资源片

- 资源片分配给各路呼叫
- 每路呼叫独占分配到的资源片进行通信
- 资源片可能闲置



典型复用

FDM 频分复用

TDM 时分复用

WDM 波分复用

CDM 码分复用

FDM 频分复用

频率划分信道

有限电视网络

用户占用不同带宽资源

用户分配到一定频带后，通信过程中自始至终占用这个频带

频带隔离

TDM

时间划分等长的时分复用帧，用户TDM帧占用固定序号的时隙

每个用户占用时隙周期型出现

每个用户占用的

时间相同

波分复用 光的频分复用

光纤 

**码分复用**

cmd

cdma

蜂窝网络

卫星网络

军用网络

划分码

每个用户一个码片序列

0用-1 表示 1用 +1 表示

码片序列 -1 +1 序列，站点-1 -1 +1 +1

cmda系统中，相同频率载波，每个用户使用码片进行编码，相乘，用户发送0 -1 1 +1

发送1 发送 m bit 码片序列

0 发送码片序列的反码

码片序列的要求

码片相互正交

Si.Sj 只有自己和自己搞，这样的序列是1，否则是0

cdm

原始序列di,各个用户叠加向量，信号传输的实际是叠加向量，当用户接受信号，

解码：码片序列与编码信号的内积

发送端 1 0

接受端 解码



**报文交换与分组交换**

报文交换

报文：源 发送信息整体

比如：一个文件

报文接受，报文转发

分组：报文拆分出来一系列相对较小的数据包

打包加头，构成一个分组

分组需要报文的拆分与重组过程

产生了额外的开销

拆分与重组

分组交换 拆分成报文发送

报文交换 一次性发送

分组交换

统计多路复用

A B分组序列不确定，需要共享链路

按需分配

**存储转发**

报文与分组都采用存储转发的交换方式

区别：

报文交换以报文为单位

分组以分组为单位

**报文与分组的优劣**

交换单位的不同？导致的区别

讨论一下

传输延迟

发送主机：

r bps

源主机

报文

拆分得到分组

Lbit的分组

在传输速度r的链路上传输分组

传输延迟：L/R

报文交换vs分组交换？

源主机到目的主机

报文交换

- 长度M
- 带宽R
- 每次传输需要M/R

分组交换

- 拆分若干
- 分组长L
- 每个分组传输时延L/R

不考虑拆分组长的开销

报文大，路由器缓存大

报文交换的话，需要接受完整的报文才能转发，延迟大

分组交换可以并行的转发分组

报文交换是串行的

分组交换在延迟上远远优于报文交换

分组交换广泛使用

分组交换缓存 理论需要一个分组大小的缓存就行

计算机网络与数据通信网络，主要使用分组交互网络技术

源主机到目的主机一个报文

报文M bit

带宽Ｒ　ｂｐｓ

分组大小　Ｌ　ｂｉｔ

跳步　ｈ

路由器　ｎ

Ｔ　＝　Ｍ／Ｒ＋（ｈ－１）Ｌ／Ｒ

**分组交换与报文交换**

１００Ｍｂｐｓ，１０００Ｂ，头２０Ｂ，大小９８００００Ｂ文件，不考虑分组拆装和传播时延，Ｈ１到Ｈ２接收为止，需要时间？

路由器ｎ＝２

９８００００加上头，文件１００００００Ｂ，总共传输需要１００００００＊８／１１００Ｍｐｓ＝８０ｍｓ，再加上最后一个分组两次转发的传输时延，２＋１０００＊８／１０Ｍ＝０．１６ｍｓ，至少８０.１６ｍｓ．

分组交换ｖｓ电路交换？

例子

１Ｍｂｐｓ链路，连接一个网络，

分组：统计时分复用

电路：频分复用，时分复用

每个用户需要链路带宽１００ｋｂ／ｓ平均活动时间１０％

电路交换

多路复用

通信前建立链路，建立后就占用１００ｋｂ链路，分到的链路不共享，即使处于空闲时间

电路交换

最多容纳１Ｍ／１００ｋ＝　１０个用户

分组交换

统计多路复用

你活动我不活动

支持更多用户同时使用网络

对于３５个用户，大于１０个用户同时使用的概论不足０.０００４，几乎不会堵塞

因此：分组交换网络允许更多的用户同时使用网络

网络资源充分共享

分组交换绝对由于电路交换？

错误

分组交换适用于突发数据传输网络

随机性，短时间大量使用，一段时间后不适用

互联网非常符合这样的特点

非突发：看视频，打电话

- 资源充分共享
- 简单，无需要呼叫

问题

- 没有预约占用网络资源，大量用户向网络传输数据，产生拥塞现象，出现排队，等待，数据丢失问题
- 需要协议区处理可靠数据传输与拥塞控制问题

问题：提供电路级别的性能保障？

## 1.4 **计算机网络性能**

速率

快慢

速率就是数据率，数据传输速率，比特率

单位时间传输信息量

bit/s

计算机性能重要指标

b/s kb/s mb/s gb/s

k=10^3 M = 10^6 G=10^9

速率往往是额定速率，标称速率，实际未必达到

带宽：原本指信号最高频率与最低频率之差 单位是hz 通信领域常用

计算机网络领域：数字信道所能传输的最大数据率，b/s



问题：分组交为什么会有丢包和延迟

交换机会有排队现象，

传输延迟 排队延迟 

可用缓存：缓存满了，到达的分组就会丢弃：丢包现象

- 分组到达速率超过了输出链路容量时候
- 分组排队，等待输出链路可用时候

四种时延

- 节点处理时延
  - 差错检测
  - 确定输出链路
  - <ms
- 排队时延
  - ·等待输出链路可用
  - 取决于拥堵程度
- 传输时延
  - 分组长度
  - 链路宽度
  - d=d/r
- 传播时延
  - d 物理链路长度
  - s 物理传输速度 光速0.7 倍
  - dprop = d/s

车速100km/h信号传播速度

收费站放型一个车12秒  比特传播时间

车 比特 车队 分组

车队通过收费站 传播时延 120秒

每台车从第一个收费站排到第二个收费站用时 传播延迟 1小时

R链路带宽

L分组长度

a平均到达速率

流量强度 La/R

La/R 接近0 平均排队很小

​     接近1  很大

​      超过1  无限大，超过服务能力了

**带宽时延积**

时延带宽积 = 传播时延 * 带宽

链路 R 带宽，

传播时延 d prop

时延带宽积：链路容纳的数据

比特为单位链路长度

分组丢包

- 队列缓存有限
- 分组到达已经满的队列会被丢弃
- 丢失分组可能由前序节点或源节点重发或不重发

丢包率 丢包数/总包数

吞吐量 **吞吐率**

发送端到接受端之间的传输数据速率

- 即时吞吐量
- 平均吞吐量

rs<rc 端到端吞吐量取决于小的那个

瓶颈链路

- 端到端限制吞吐量的链路

10条共享主干瓶颈链路 

实际网络rc rs是瓶颈

接入网络最慢

## 1.5 计算机网络体系结构

为什么需要计算机网络结构

计算机网络是一个非常复杂的系统，设计许多非常复杂的组成部分

- 主机
- 路由器
- 各种链路
- 应用
- 协议
- 硬件/软件

问题

是否存在一种系统结构可以清楚的描述网络·1

利用什么样的结构？

分层结构

复杂系统 分层结构描述很有效

类比航空旅行

每层完成一个特殊功能/服务

计算机网络体系结构

功能描述

不是结构描述

分层结构

每个层遵循网络协议完成本层的功能

体系结构是计算机网络各层机器协议的集合

**为什么采用分层结构**？

- 结构清晰，有利于识别复杂系统部件和其关系
- 参考模型
- 模块化 易于维护，更新
  - 任何一层服务实现的改变对于系统其他层都是透明的
- 有利于标准化

分层不利之处？

- 分层太多，效率过低



网络分层基本概念

- 服务用户
- 服务提供者
- 实体：任何可以发送接受信息的软件或者硬件
- 协议是控制两个对等实习进行通信的规则的集合，是水平的

任一层实体需要使用下层服务，遵循本层协议，实现本层功能，向上层提供服务，服务是垂直的

下层协议的实现对与上层服务是透明的

同一系统相邻实体间通过接口进行交互，通过服务访问点sap，交换原语制定请求的特定服务

OSI**参考模型**

iso 1984年提出的分层网络体系结构模型

- 目的 支持异构网络互联互通
- 企业网路之间很难互联互通
- 解决这个问题

异构网络互联的国际标准

理论成功，市场失败

通信网路学习工具

7层 ，

- 物理
- 数据链路
- 网络
- 传输
- 会话
- 表示
- 应用

中间系统 路由器

主机 AB

如何完成？

主机完成所有七层功能

路由器完成下三层模型

对等层次协议：如何构造数据 交换数据

pdu协议数据单元

实际通讯

虚拟通讯

相邻层通过接口连接

上四层与下三层不一样

上四层直接对应目的主机

因此称之为端到端的层

数据是一层一层逐层传输的

层为什么数据封装

- 增加控制信息
  - 构造pdu
- 控制信息
  - 地址：发送与接受端
  - 差错检测编码 非必要
  - 协议控制 优先级 qos 安全

osi**参考模型**

物理层功能

- 传输比特
- 接口特性
  - 机械
  - 电气
  - 功能
  - 规程
- 比特编码 如何表示0 1
- 数据率
- 比特同步
  - 时钟同步
- 传输模式
  - 单工模式 单向 电视
  - 半双工 可以双向 交替进行 对讲机
  - 全双工 



**数据链路层**

- 组帧
- 节点到节点数据传输，物理链路直接连接的相邻节点进行数据传输
- 帧为单位，封装头尾
- 物理寻址 物理地址在数据链路层
  - 帧头增加发送接受端的物理地址标识数据的发送端和接受端
- 没有地址信息，信息无法发送到目的主机
- 流量控制
  - 匹配速度，避免淹没
- 差错控制
  - 避免丢帧，避免重复帧
- 访问控制
  - 任一给定时刻决定那个设备拥有链路控制使用权











dns
